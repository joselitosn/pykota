.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.38.2.
.TH PKREFUND "1" "aoÃ»t 2010" "C@LL - Conseil Internet & Logiciels Libres" "User Commands"
.SH NOM
pkrefund \- page de manuel de pkrefund (PyKota) 1.27alpha13_unofficial
.SH SYNOPSIS
.B pkrefund
[\fIoptions\fR] [\fIfilterexpr\fR]
.SH DESCRIPTION
Refunding tool for PyKota.
.SH OPTIONS
.TP
\fB\-h\fR, \fB\-\-help\fR
show this help message and exit.
.TP
\fB\-v\fR, \fB\-\-version\fR
show the version number and exit.
.TP
\fB\-A\fR ARGUMENTSFILE, \fB\-\-arguments\fR=\fIARGUMENTSFILE\fR
loads additional options and arguments from a file,
one per line.
.TP
\fB\-f\fR, \fB\-\-force\fR
Doesn't ask for confirmation before refunding. Only
needed if you specify a filename for the PDF receipts.
If you send such receipts to stdout, \fB\-\-force\fR is
assumed to be set.
.TP
\fB\-i\fR INFO, \fB\-\-info\fR=\fIINFO\fR
The informations to be prepended to the refunding
reason, which can include some of Python's string
interpolations to access to certain internal values.
If you don't want such information, set this
explicitely to an empty string. The default is
\&'''Refunded %(nbpages)i pages and %(nbcredits).3f
credits by %(effectiveuser)s (%(loginname)s) on
%(date)s'''
.TP
\fB\-l\fR LOGO, \fB\-\-logo\fR=\fILOGO\fR
The image to use as a logo. The logo will be drawn at
the center top of the page. The default logo is
/usr/share/pykota/logos/pykota.jpeg.
.TP
\fB\-n\fR NUMBER, \fB\-\-number\fR=\fINUMBER\fR
Sets the number of the first receipt. This number will
automatically be incremented for each receipt. The
default value is 1.
.TP
\fB\-o\fR OUTPUT, \fB\-\-output\fR=\fIOUTPUT\fR
The name of the file to which the PDF receipts will be
written. If not set or set to '\-', the PDF document
will be sent to the standard output, and \fB\-\-force\fR will
be assumed to be set.
.TP
\fB\-p\fR PAGESIZE, \fB\-\-pagesize\fR=\fIPAGESIZE\fR
Set the size of the page. Most well known page sizes
are recognized, like 'A4' or 'Letter' to name a few.
The default page size is A4.
.TP
\fB\-r\fR REASON, \fB\-\-reason\fR=\fIREASON\fR
The reason why there was a refund.
.TP
\fB\-u\fR UNIT, \fB\-\-unit\fR=\fIUNIT\fR
The name of the unit to use on the receipts. The
default value is 'Credits' or its locale translation.
.SS "filtering expressions:"
.IP
Use the filtering expressions to extract only parts of the datas. Allowed
filters are of the form 'key=value'. Wildcards are not expanded as part of
these filtering expressions, so you can't use them here.
.IP
allowed keys for now:
.IP
username : User's name
printername : Printer's name
hostname : Host's name
jobid : Job's id
billingcode : Job's billing code
start : Job's date of printing
end : Job's date of printing
.IP
formatting of dates with the 'start' and 'end' filtering keys:
.IP
YYYY : year boundaries
YYYYMM : month boundaries
YYYYMMDD : day boundaries
YYYYMMDDhh : hour boundaries
YYYYMMDDhhmm : minute boundaries
YYYYMMDDhhmmss : second boundaries
yesterday[+\-N] : yesterday more or less N days (e.g. : yesterday\-15)
today[+\-N] : today more or less N days (e.g. : today\-15)
tomorrow[+\-N] : tomorrow more or less N days (e.g. : tomorrow\-15)
now[+\-N] : now more or less N days (e.g. now\-15)
.IP
\&'now' and 'today' are not exactly the same since 'today' represents the
first or last second of the day depending on if it's used in a 'start=' or
\&'end=' date expression.
.IP
examples:
.IP
pkrefund \fB\-\-output\fR /tmp/receipts.pdf jobid=503
This would refund all jobs which Id is 503. A confirmation would be
asked for each job to refund, and a PDF file named /tmp/receipts.pdf
would be created containing printable receipts. BEWARE of job ids
rolling over if you reset CUPS' history.
.IP
pkrefund \fB\-\-reason\fR "Hardware problem" jobid=503 start=today\-7
This would refund all jobs which id is 503 but which would have been
printed during the  past week. The reason would be marked as being an
hardware problem.
.IP
pkrefund \fB\-\-force\fR username=jerome printername=HP2100
This would refund all jobs printed by user jerome on printer HP2100.
No confirmation would be asked.
.IP
pkrefund \fB\-\-force\fR printername=HP2100 start=200602 end=yesterday
This would refund all jobs printed on printer HP2100 between February
1st 2006 and yesterday. No confirmation would be asked.
.IP
licensing terms:
.IP
(c) 2003\-2010 Jerome Alet \- alet@librelogiciel.com
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or (at
your option) any later version.
.IP
This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.
.IP
You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
